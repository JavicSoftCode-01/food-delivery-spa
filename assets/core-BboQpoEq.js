const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard-hHYCQ7-n.js","assets/ui-DeEF8Jzz.js","assets/utils-CHR9XXmZ.js","assets/clients-RdUOVkjS.js","assets/orders-hOMHlC1e.js","assets/foods-DaKVschR.js","assets/settings-DNgA3rmA.js","assets/foods-DcIqCKtE.js"])))=>i.map(i=>d[i]);
var J=Object.defineProperty,X=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var H=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))ee.call(t,r)&&H(e,r,t[r]);if(B)for(var r of B(t))te.call(t,r)&&H(e,r,t[r]);return e},P=(e,t)=>X(e,Z(t));var u=(e,t,r)=>new Promise((i,o)=>{var n=a=>{try{c(r.next(a))}catch(l){o(l)}},s=a=>{try{c(r.throw(a))}catch(l){o(l)}},c=a=>a.done?i(a.value):Promise.resolve(a.value).then(n,s);c((r=r.apply(e,t)).next())});import{U as d}from"./ui-DeEF8Jzz.js";const re="modulepreload",ie=function(e){return"/food-delivery-spa/"+e},q={},v=function(t,r,i){let o=Promise.resolve();if(r&&r.length>0){let a=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=a(r.map(l=>{if(l=ie(l),l in q)return;q[l]=!0;const m=l.endsWith(".css"),T=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${T}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":re,m||(g.as="script"),g.crossOrigin="",g.href=l,c&&g.setAttribute("nonce",c),document.head.appendChild(g),m)return new Promise((F,k)=>{g.addEventListener("load",F),g.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return o.then(s=>{for(const c of s||[])c.status==="rejected"&&n(c.reason);return t().catch(n)})},I=new Map,K={dashboard:()=>v(()=>import("./dashboard-hHYCQ7-n.js"),__vite__mapDeps([0,1,2])),clients:()=>v(()=>import("./clients-RdUOVkjS.js"),__vite__mapDeps([3,4,1,2])),foods:()=>v(()=>import("./foods-DaKVschR.js"),__vite__mapDeps([5,2,1])),settings:()=>v(()=>import("./settings-DNgA3rmA.js"),__vite__mapDeps([6,1]))},oe={orderForm:()=>v(()=>import("./orders-hOMHlC1e.js").then(e=>e.o),__vite__mapDeps([4,1,2])),foodForm:()=>v(()=>import("./foods-DcIqCKtE.js").then(e=>e.f),__vite__mapDeps([7,1,2])),salesHistory:()=>v(()=>import("./foods-DcIqCKtE.js").then(e=>e.s),__vite__mapDeps([7,1,2])),orderDetails:()=>v(()=>import("./orders-hOMHlC1e.js").then(e=>e.a),__vite__mapDeps([4,1,2])),callModal:()=>v(()=>import("./orders-hOMHlC1e.js").then(e=>e.c),__vite__mapDeps([4,1,2])),deliveryToggle:()=>v(()=>import("./orders-hOMHlC1e.js").then(e=>e.d),__vite__mapDeps([4,1,2]))};function ne(e){return u(this,null,function*(){try{if(I.has(e))return I.get(e);const t=yield K[e]();return I.set(e,t),t}catch(t){throw console.error(`Error cargando pantalla ${e}:`,t),t}})}function p(e){return u(this,null,function*(){try{if(I.has(e))return I.get(e);const t=yield oe[e]();return I.set(e,t),t}catch(t){throw console.error(`Error cargando feature ${e}:`,t),t}})}function z(e){I.has(e)||K[e]().then(t=>{I.set(e,t)}).catch(t=>{console.warn(`Preload fall贸 para ${e}:`,t)})}const S={screens:{dashboard:{strategy:"immediate",priority:10},foods:{strategy:"idle",priority:8},clients:{strategy:"idle",priority:7},settings:{strategy:"interaction",priority:5}},features:{orderForm:{strategy:"hover",priority:9},foodForm:{strategy:"hover",priority:8},orderDetails:{strategy:"viewport",priority:6},salesHistory:{strategy:"interaction",priority:5}}};class se{constructor(){this.prefetchQueue=new Map,this.isIdle=!1,this.idleTimer=null,this.observer=null,this.hoverElements=new Set,this.initializeIdleDetection(),this.initializeIntersectionObserver(),this.initializeHoverDetection()}initializeIdleDetection(){"requestIdleCallback"in window?this.scheduleIdlePrefetch():this.scheduleFallbackIdle()}scheduleIdlePrefetch(){const t=()=>{this.isIdle&&this.processIdlePrefetch(),this.idleTimer=window.setTimeout(t,1e3)};t()}scheduleFallbackIdle(){let t=Date.now();const r=()=>{const i=Date.now();i-t>2e3&&(this.isIdle=!0,this.processIdlePrefetch()),t=i,this.idleTimer=window.setTimeout(r,1e3)};r()}initializeIntersectionObserver(){"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(t=>{t.forEach(r=>{if(r.isIntersecting){const o=r.target.dataset.prefetch;o&&this.prefetchModule(o,"viewport")}})},{threshold:.1}))}initializeHoverDetection(){document.addEventListener("mouseover",t=>{const r=t.target,i=r.dataset.prefetch;i&&!this.hoverElements.has(r)&&(this.hoverElements.add(r),this.prefetchModule(i,"hover"))})}prefetchModule(t,r){return u(this,null,function*(){try{const i=this.getPrefetchConfig(t);if(!i||i.strategy!==r||this.isModuleCached(t)||(i.delay&&(yield new Promise(o=>setTimeout(o,i.delay))),i.condition&&!i.condition()))return;yield this.executePrefetch(t),console.log(` Prefetch completado: ${t} (${r})`)}catch(i){console.warn(`锔 Prefetch fall贸 para ${t}:`,i)}})}getPrefetchConfig(t){return t in S.screens?S.screens[t]:t in S.features?S.features[t]:null}isModuleCached(t){return!1}executePrefetch(t){return u(this,null,function*(){if(t in S.screens)console.log(` Prefetch de pantalla: ${t}`);else if(t in S.features)try{yield p(t)}catch(r){console.warn(`Error en prefetch de feature ${t}:`,r)}})}processIdlePrefetch(){return u(this,null,function*(){const t=Object.entries(S).flatMap(([r,i])=>Object.entries(i).filter(([o,n])=>n.strategy==="idle").map(([o,n])=>({name:o,config:n,category:r}))).sort((r,i)=>i.config.priority-r.config.priority);for(const{name:r,category:i}of t)this.isIdle&&(yield this.prefetchModule(r,"idle"),yield new Promise(o=>setTimeout(o,50)))})}startInteraction(){this.isIdle=!1}endInteraction(){setTimeout(()=>{this.isIdle=!0},1e3)}observeElement(t,r){this.observer&&(t.dataset.prefetch=r,this.observer.observe(t))}destroy(){this.idleTimer&&clearTimeout(this.idleTimer),this.observer&&this.observer.disconnect(),this.hoverElements.clear()}getStats(){return{isIdle:this.isIdle,observedElements:this.observer?1:0,hoverElements:this.hoverElements.size}}}const O=new se;function ae(){Object.entries(S).flatMap(([e,t])=>Object.entries(t).filter(([r,i])=>i.strategy==="immediate").map(([r])=>r)).forEach(e=>{O.prefetchModule(e,"immediate")})}function ce(e){({dashboard:["foods","clients"],foods:["dashboard","orderForm"],clients:["dashboard","orderForm"],settings:["dashboard"]}[e]||[]).forEach(i=>{O.prefetchModule(i,"idle")})}let D="dashboard";const C=new Set,w=new Map,le=["dashboard","clients","foods","settings"],b={getScreen(){return D},setScreen(e){return u(this,null,function*(){e!==D&&(O.startInteraction(),w.has(e)||z(e),D=e,ce(e),setTimeout(()=>{O.endInteraction()},500),C.forEach(t=>t(D)))})},subscribe(e){return C.add(e),()=>C.delete(e)},getRenderer(e){return u(this,null,function*(){if(w.has(e))return w.get(e);try{const t=yield ne(e),r=t.renderDashboard||t.renderClients||t.renderFoods||t.renderSettings;if(r&&typeof r=="function")return w.set(e,r),r;throw new Error(`Funci贸n de renderizado no encontrada para ${e}`)}catch(t){throw console.error(`Error obteniendo renderizador para ${e}:`,t),t}})},preloadAll(){le.forEach(e=>{z(e)})},clearCache(){w.clear()},getCacheStats(){return{renderCacheSize:w.size,renderCacheKeys:Array.from(w.keys())}}},de="fd_meta_v1",ue="fd_foods_v1",fe="fd_orders_v1",me="fd_audit_v1",he="fd_food_sale_records_v1",y={read(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Storage.read error",t),null}},write(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(r){return console.error("Storage.write failed",r),!1}},keys:{KEY_META:de,KEY_FOODS:ue,KEY_ORDERS:fe,KEY_AUDIT:me,KEY_FOOD_SALE_RECORDS:he}},L=(e="")=>e+Math.random().toString(36).slice(2,9),U=()=>Date.now(),Te=e=>(e||"").toString().trim(),we=(e,t=300)=>{let r;return(...i)=>{r&&window.clearTimeout(r),r=window.setTimeout(()=>e(...i),t)}};function Ee(e){if(!e||!e.includes(":"))return e;const[t,r]=e.split(":");let i=parseInt(t,10);const o=i>=12?"p.m.":"a.m.";return i=i%12,i=i||12,`${i<10?"0"+i:i.toString()}:${r} ${o}`}const Ae=e=>{const t=(e||"").toString();let r="";if(t.startsWith("+")){const i=t.substring(1);if(i.startsWith("593")){const o=i.substring(3);if(o.startsWith(" ")){const n=o.substring(1);let s="+593 ",c=0;for(let a=0;a<n.length&&c<9;a++){const l=n[a];/[0-9]/.test(l)&&((c===2||c===5)&&(s+=" "),s+=l,c++)}r=s}else r="+593"+o.replace(/[^0-9]/g,"")}else r="+"+i.replace(/[^0-9]/g,"")}else r=t.replace(/[^0-9]/g,"");return r.startsWith("09")?r.length>10&&(r=r.substring(0,10)):r.startsWith("+593 9")?r.length>16&&(r=r.substring(0,16)):r.startsWith("+593")&&r.length>13&&(r=r.substring(0,13)),r},_e=e=>!!(/^09\d{8}$/.test(e)||/^\+5939\d{8}$/.test(e)||/^\+593 9\d \d{3} \d{4}$/.test(e)),pe=e=>{if(!e)return"";const t=e.replace(/\s/g,"");return t.startsWith("09")&&t.length===10?`+593${t.substring(1)}`:t.startsWith("+5939")&&t.length===13?t:""},De=e=>e?e.toString().replace(/\D/g,""):"",ve={STORAGE_KEYS:{SETTINGS:"fd_meta_v1"},BUSINESS:{CURRENCY:"USD"}},V=y.keys.KEY_FOODS,j=y.keys.KEY_FOOD_SALE_RECORDS,f={getAll(){return y.read(j)||[]},saveAll(e){y.write(j,e)},add(e){const t=h({id:L("record_")},e),r=this.getAll();return r.push(t),this.saveAll(r),t},update(e){const t=this.getAll().map(r=>r.id===e.id?h(h({},r),e):r);this.saveAll(t)},findByFoodId(e){return this.getAll().filter(t=>t.foodId===e).sort((t,r)=>{const i=new Date(r.recordDate).getTime()-new Date(t.recordDate).getTime();return i!==0?i:r.id.localeCompare(t.id)})},findLatestActiveByFoodId(e){return this.findByFoodId(e).find(t=>t.isActive)}},_={getAll(){return y.read(V)||[]},saveAll(e){y.write(V,e)},add(e,t){return u(this,null,function*(){return new Promise(r=>{setTimeout(()=>{const i=h({id:L("food_"),amountSold:0,createdAt:U(),isActive:!0},e),o=this.getAll();o.push(i),this.saveAll(o);const n=new Date().toISOString().slice(0,10);f.add({foodId:i.id,recordDate:n,startTime:t.startTime,endTime:t.endTime,initialStock:i.stock,unitPrice:i.price,unitCost:i.cost,quantitySoldSingle:0,comboSales:{},isActive:!0}),console.log("Food created",{id:i.id,name:i.name}),r(i)},1e3)})})},update(e,t){return u(this,null,function*(){return new Promise(r=>{setTimeout(()=>{const i=this.findById(e.id);if(!i)return r();const o=new Date().toISOString().slice(0,10),n=f.findLatestActiveByFoodId(e.id),s=Math.abs(e.price-i.price)>.001||Math.abs(e.cost-i.cost)>.001;if(e.isActive&&s)n&&n.recordDate===o&&(n.isActive=!1,f.update(n)),e.amountSold=0,f.add({foodId:e.id,recordDate:o,startTime:(t==null?void 0:t.startTime)||"08:00",endTime:(t==null?void 0:t.endTime)||"23:00",initialStock:e.stock,unitPrice:e.price,unitCost:e.cost,quantitySoldSingle:0,comboSales:{},isActive:!0});else if(e.isActive&&!i.isActive){const a=f.findByFoodId(e.id).find(l=>l.recordDate===o);a&&!s?(a.isActive=!0,e.stock>i.stock&&(a.initialStock+=e.stock-i.stock),t!=null&&t.startTime&&(a.startTime=t.startTime),t!=null&&t.endTime&&(a.endTime=t.endTime),f.update(a)):(e.amountSold=0,f.add({foodId:e.id,recordDate:o,startTime:(t==null?void 0:t.startTime)||"08:00",endTime:(t==null?void 0:t.endTime)||"23:00",initialStock:e.stock,unitPrice:e.price,unitCost:e.cost,quantitySoldSingle:0,comboSales:{},isActive:!0}))}else if(!e.isActive&&i.isActive)n&&(n.isActive=!1,f.update(n));else if(e.isActive&&n){if(e.stock>i.stock){const a=e.stock-i.stock;n.initialStock+=a}t!=null&&t.startTime&&(n.startTime=t.startTime),t!=null&&t.endTime&&(n.endTime=t.endTime),f.update(n)}const c=this.getAll().map(a=>a.id===e.id?h(h({},a),e):a);this.saveAll(c),console.log("Food updated",{id:e.id,name:e.name}),r()},1e3)})})},findById(e){return this.getAll().find(t=>t.id===e)},nameExists(e,t){const r=e.trim().toLowerCase();return this.getAll().some(i=>i.id!==t&&i.name.trim().toLowerCase()===r)},totalProfit(){return f.getAll().reduce((t,r)=>{const i=(r.unitPrice-r.unitCost)*(r.quantitySoldSingle||0),o=Object.values(r.comboSales||{}).reduce((n,s)=>{const c=s.price*s.count,a=r.unitCost*s.quantity*s.count;return n+(c-a)},0);return t+i+o},0)},decreaseStock(e,t){const r=this.getAll(),i=r.findIndex(o=>o.id===e.foodId);if(i>-1){r[i].stock=Math.max(0,r[i].stock-t),r[i].amountSold+=t,this.saveAll(r);const o=f.findLatestActiveByFoodId(e.foodId);if(o){if(e.quantity>0&&(o.quantitySoldSingle=(o.quantitySoldSingle||0)+e.quantity),e.comboId&&e.comboQuantity>0){const s=r[i].combos.find(c=>c.id===e.comboId);s&&(o.comboSales||(o.comboSales={}),o.comboSales[e.comboId]||(o.comboSales[e.comboId]={quantity:s.quantity,price:s.price,count:0}),o.comboSales[e.comboId].count+=e.comboQuantity)}f.update(o)}}},increaseStock(e,t){const r=this.getAll(),i=r.findIndex(o=>o.id===e.foodId);if(i>-1){r[i].stock+=t,r[i].amountSold=Math.max(0,r[i].amountSold-t),this.saveAll(r);const o=f.findLatestActiveByFoodId(e.foodId);o&&(e.quantity>0&&(o.quantitySoldSingle=Math.max(0,(o.quantitySoldSingle||0)-e.quantity)),e.comboId&&e.comboQuantity>0&&o.comboSales&&o.comboSales[e.comboId]&&(o.comboSales[e.comboId].count=Math.max(0,o.comboSales[e.comboId].count-e.comboQuantity)),f.update(o))}}},Y=y.keys.KEY_ORDERS,W={_calculateTotalItems(e){const t=_.findById(e.foodId);if(!t)return e.quantity;let r=e.quantity;if(e.comboId&&e.comboQuantity>0){const i=t.combos.find(o=>o.id===e.comboId);i&&(r+=i.quantity*e.comboQuantity)}return r},_internalGetAll(){return y.read(Y)||[]},getReservedStockForFood(e,t){return this._internalGetAll().filter(o=>o.foodId===e&&!o.delivered&&o.id!==t).reduce((o,n)=>o+this._calculateTotalItems(n),0)},getAll(){return this._internalGetAll().filter(e=>e.state!==!1)},saveAll(e){y.write(Y,e)},add(e){return u(this,null,function*(){return new Promise(t=>{setTimeout(()=>{const r=_.findById(e.foodId);if(!r)return d.toast("La comida seleccionada no existe."),t(null);const i=f.findLatestActiveByFoodId(e.foodId);if(!i||!i.isActive)return d.toast("La comida no est谩 disponible para la venta en este momento."),t(null);const o=new Date(e.deliveryTime),[n,s]=[o.getHours(),o.getMinutes()],c=n*60+s,[a,l]=i.startTime.split(":").map(Number),m=a*60+l,[T,g]=i.endTime.split(":").map(Number),F=T*60+g;if(c<m||c>F)return d.toast(`Pedido fuera de horario. Disponible de ${i.startTime} a ${i.endTime}.`),t(null);const k=P(h({id:"temp"},e),{createdAt:0,delivered:!1,state:!0,deliveredAt:null}),R=this._calculateTotalItems(k),Q=this.getReservedStockForFood(r.id),M=r.stock-Q;if(M<R)return d.toast(`Stock insuficiente para '${r.name}'. Solicitado: ${R}, Disponible: ${M}.`,1e4),t(null);const $=h({id:L("order_"),createdAt:U(),delivered:!1,deliveredAt:null,state:!0},e),x=this._internalGetAll();x.push($),this.saveAll(x),t($)},500)})})},update(e){return u(this,null,function*(){return new Promise(t=>{setTimeout(()=>{const r=this._internalGetAll(),i=r.find(m=>m.id===e.id);if(!i)return d.toast("El pedido original no se encontr贸 para actualizar."),t(!1);if(i.delivered)return d.toast("No se puede modificar un pedido que ya ha sido entregado."),t(!1);const o=_.findById(e.foodId);if(!o)return d.toast("La comida seleccionada no existe."),t(!1);const n=f.findLatestActiveByFoodId(e.foodId);if(!n||!n.isActive)return d.toast("La comida no est谩 disponible para la venta en este momento."),t(!1);const s=this._calculateTotalItems(e),c=this.getReservedStockForFood(o.id,e.id),a=o.stock-c;if(a<s)return d.toast(`Stock insuficiente para '${o.name}'. Solicitado: ${s}, Disponible: ${a}.`,1e4),t(!1);const l=r.map(m=>m.id===e.id?h(h({},m),e):m);this.saveAll(l),t(!0)},500)})})},updateDeliveryStatus(e,t){return u(this,null,function*(){return new Promise(r=>{setTimeout(()=>{const i=this._internalGetAll(),o=i.findIndex(l=>l.id===e);if(o===-1)return d.toast("Pedido no encontrado."),r(!1);const n=i[o],s=n.delivered;if(s===t)return r(!0);const c=_.findById(n.foodId);if(!c)return d.toast("La comida asociada al pedido ya no existe."),r(!1);const a=this._calculateTotalItems(n);if(t&&!s){if(c.stock<a)return d.toast(`No se puede entregar: Stock f铆sico insuficiente para '${c.name}'. Requerido: ${a}, F铆sico: ${c.stock}.`,1e4),r(!1);_.decreaseStock(n,a),n.delivered=!0,n.deliveredAt=new Date().toISOString()}else!t&&s&&(_.increaseStock(n,a),n.delivered=!1,n.deliveredAt=null);i[o]=n,this.saveAll(i),r(!0)},500)})})},archiveDeliveredOrders(){const e=this._internalGetAll().map(t=>t.delivered?P(h({},t),{state:!1}):t);this.saveAll(e),d.toast("Pedidos entregados archivados.")},isFoodInActiveOrder(e){return this.getAll().some(t=>t.foodId===e)},getSorted(){const e=this.getAll(),t=e.filter(i=>!i.delivered),r=e.filter(i=>i.delivered);return t.sort((i,o)=>new Date(i.deliveryTime).getTime()-new Date(o.deliveryTime).getTime()),r.sort((i,o)=>{const n=i.deliveredAt?new Date(i.deliveredAt).getTime():0;return(o.deliveredAt?new Date(o.deliveredAt).getTime():0)-n}),[...t,...r]},findById(e){return this.getAll().find(t=>t.id===e)},checkConflict(e,t,r){const i=Math.abs(t)*60*1e3,o=new Date(e).getTime(),n=this.getAll().filter(s=>s.id!==r&&!s.delivered);for(const s of n)if(Math.abs(o-new Date(s.deliveryTime).getTime())<i)return{conflict:!0,other:s};return{conflict:!1}}};window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),d.toast("Ocurri贸 un error inesperado.")});let A,E=60;function N(){A&&(clearInterval(A),A=void 0);const e=W.getAll(),t=e.filter(i=>!i.delivered).length,r=e.length-t;t>0?(d.updateHeaderContent(`<div class="pulse-animation bg-red-500 text-white text-base font-bold w-8 h-8 flex items-center justify-center rounded-full">${t}</div>`),E=60):r>0?ge():(d.updateHeaderContent(""),E=60)}function ge(){const e=()=>{const r='<button id="archive-btn" title="Archivar pedidos entregados" class="bg-red-500 text-white w-10 h-10 flex items-center justify-center rounded-full hover:bg-red-600"><i class="fa fa-trash-can fa-lg"></i></button>';if(b.getScreen()==="clients"){d.updateHeaderContent(r);const i=document.getElementById("archive-btn");i&&i.addEventListener("click",()=>{d.confirm("驴Deseas archivar todos los pedidos ya entregados?",()=>{W.archiveDeliveredOrders(),document.dispatchEvent(new CustomEvent("refreshViews")),N()})})}else d.updateHeaderContent("")},t=()=>{const r=Math.floor(E/60),i=E%60,o=`<div class="bg-gray-400 text-white text-sm font-mono w-12 h-8 flex items-center justify-center rounded-lg">${r}:${i.toString().padStart(2,"0")}</div>`;b.getScreen()==="clients"?d.updateHeaderContent(o):d.updateHeaderContent("")};if(E<=0){e();return}t(),A=window.setInterval(()=>{E--,E<=0?(A&&(clearInterval(A),A=void 0),e()):t()},1e3)}function G(){return u(this,null,function*(){const e=b.getScreen();d.updateTitle(e),d.renderNavActive(e),N();const t=document.getElementById("mainArea");t.innerHTML="",t.innerHTML='<div class="flex items-center justify-center h-32"><div class="spinner"></div></div>';try{const r=yield b.getRenderer(e);t.innerHTML="";const i=document.createElement("div");t.appendChild(i),r(i)}catch(r){console.error("Error renderizando pantalla:",r),t.innerHTML=`
			<div class="flex flex-col items-center justify-center h-32 text-red-500">
				<i class="fa fa-exclamation-triangle fa-2x mb-2"></i>
				<p>Error cargando la pantalla</p>
				<button onclick="location.reload()" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded">
					Recargar
				</button>
			</div>
		`}})}function ye(){const e=localStorage.getItem(ve.STORAGE_KEYS.SETTINGS)||"{}";let t={};try{t=JSON.parse(e)||{}}catch(r){t={}}t.darkMode&&document.documentElement.classList.add("dark")}function Se(){ye(),d.renderShell(),document.querySelectorAll("#bottomNav .nav-item").forEach(t=>{t.setAttribute("tabindex","0"),t.addEventListener("click",r=>u(null,null,function*(){const i=r.currentTarget.dataset.screen;if(i){const o=r.currentTarget,n=o.innerHTML;o.innerHTML='<i class="fa fa-spinner fa-spin"></i>',o.setAttribute("disabled","true");try{yield b.setScreen(i)}finally{o.innerHTML=n,o.removeAttribute("disabled")}}}))});const e=document.getElementById("scrollToTopBtn");e&&(window.addEventListener("scroll",()=>{const t=b.getScreen();window.scrollY>200&&(t==="clients"||t==="foods")?e.classList.remove("opacity-0","pointer-events-none","translate-y-4"):e.classList.add("opacity-0","pointer-events-none","translate-y-4")},{passive:!0}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})),document.addEventListener("openOrderForm",t=>u(null,null,function*(){var i;const r=(i=t.detail)==null?void 0:i.id;try{const{openOrderForm:o}=yield p("orderForm");o(r)}catch(o){console.error("Error abriendo formulario de pedido:",o)}})),document.addEventListener("openFoodForm",t=>u(null,null,function*(){var i;const r=(i=t.detail)==null?void 0:i.id;try{const{openFoodForm:o}=yield p("foodForm");o(r)}catch(o){console.error("Error abriendo formulario de comida:",o)}})),document.addEventListener("openSalesHistory",t=>u(null,null,function*(){var i;const r=(i=t.detail)==null?void 0:i.foodId;if(r)try{const{openSalesHistoryModal:o}=yield p("salesHistory");o(r)}catch(o){console.error("Error abriendo historial de ventas:",o)}})),document.addEventListener("openOrderDetails",t=>u(null,null,function*(){var i;const r=(i=t.detail)==null?void 0:i.id;if(r)try{const{showOrderDetails:o}=yield p("orderDetails");o(r,()=>document.dispatchEvent(new CustomEvent("refreshViews")))}catch(o){console.error("Error abriendo detalles del pedido:",o)}})),document.addEventListener("openCallModal",t=>u(null,null,function*(){var i;const r=(i=t.detail)==null?void 0:i.phone;if(r)try{const{showCallModal:o}=yield p("callModal");o(r)}catch(o){console.error("Error abriendo modal de llamada:",o)}})),b.preloadAll(),ae(),b.subscribe(()=>G()),G()}Se();typeof window!="undefined"&&v(()=>u(null,null,function*(){const{initializeBundleMonitoring:e}=yield import("./utils-CHR9XXmZ.js").then(t=>t.b);return{initializeBundleMonitoring:e}}),[]).then(({initializeBundleMonitoring:e})=>{e()}).catch(console.error);export{ve as C,_ as F,W as O,f as a,Ae as b,we as d,Ee as f,De as g,_e as i,Te as n,pe as t,N as u};
